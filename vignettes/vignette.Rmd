---
title: "PubMatrixR: Offline Vignette for Package Checks"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{PubMatrixR Offline Vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.align = "center",
  warning = FALSE,
  message = FALSE
)
```

## Overview

`PubMatrixR` builds pairwise co-occurrence matrices for two sets of terms by
querying the NCBI Entrez E-utilities API. CRAN package checks should not
rely on live web access, so this vignette demonstrates the package workflow
using a small offline matrix and shows the live query call in a non-evaluated
chunk.

## Offline Example Matrix

```{r offline-matrix}
library(PubMatrixR)

result <- data.frame(
  WNT1 = c(15, 4, 9),
  WNT2 = c(12, 1, 6),
  WNT3A = c(20, 3, 11),
  row.names = c("FZD1", "FZD2", "LRP6"),
  check.names = FALSE
)

result
```

## Table View

```{r table-view}
knitr::kable(result, caption = "Example PubMatrix-style result (offline)")
```

## Heatmap Visualization

```{r heatmap-view, fig.width=7, fig.height=5}
plot_pubmatrix_heatmap(
  result,
  title = "Example Co-occurrence Overlap (%)",
  show_numbers = TRUE
)
```

## Live Query Usage (Not Evaluated During Checks)

```{r live-query, eval=FALSE}
A <- c("WNT1", "WNT2")
B <- c("FZD1", "FZD2")

live_result <- PubMatrix(
  A = A,
  B = B,
  Database = "pubmed",
  daterange = c(2020, 2024)
)

live_result
```

## Export Example (Temporary File Pattern)

```{r export-example, eval=FALSE}
out_stem <- tempfile("pubmatrix_demo_")

result <- PubMatrix(
  A = c("WNT1", "WNT2"),
  B = c("FZD1", "FZD2"),
  Database = "pubmed",
  export_format = "csv",
  outfile = out_stem
)

list.files(tempdir(), pattern = "^pubmatrix_demo_", full.names = TRUE)
```

## Session Information

```{r session-info}
sessionInfo()
```
